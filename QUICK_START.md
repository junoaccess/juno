# Data Table & Pagination - Quick Start

## What Was Created

### 1. Core Components

**Generic Data Table** (`resources/js/components/data-table/data-table.tsx`)
- Reusable table component using TanStack Table v8
- Works with any data type (TypeScript generics)
- Built-in search, sorting, column visibility
- Uses shadcn/ui table primitives

**Laravel Pagination** (`resources/js/components/pagination/laravel-pagination.tsx`)
- Works with standard Laravel paginator output
- Uses Inertia links (no page reloads)
- Renders Previous/Next and page numbers
- Uses shadcn/ui pagination primitives

### 2. Example Implementations

**Users** (`resources/js/pages/users/`)
- `index.tsx` - Users listing page
- `components/users-columns.tsx` - User columns with actions

**Organizations** (`resources/js/pages/organisations/`)
- `index.tsx` - Organizations listing page
- `components/organisations-columns.tsx` - Organization columns with actions

### 3. Backend Updates

**Controllers Updated**:
- `UserController@index` - Now returns paginated users
- `OrganizationController@index` - Now returns paginated organizations with counts

**Services Updated**:
- `OrganizationService::paginate()` - Added `withCount(['users', 'teams'])`

## How to Use for New Resource

### 1. Create Columns File

`resources/js/pages/{resource}/components/{resource}-columns.tsx`:

```tsx
import { ColumnDef } from '@tanstack/react-table';
import { DataTableColumnHeader } from '@/components/data-table/data-table';

export interface Resource {
    id: number;
    name: string;
    // ... other fields
}

export const resourceColumns: ColumnDef<Resource>[] = [
    {
        accessorKey: 'name',
        header: ({ column }) => (
            <DataTableColumnHeader column={column} title="Name" />
        ),
        cell: ({ row }) => <span>{row.getValue('name')}</span>,
    },
    // ... more columns
];
```

### 2. Create Index Page

`resources/js/pages/{resource}/index.tsx`:

```tsx
import { DataTable } from '@/components/data-table/data-table';
import { LaravelPagination } from '@/components/pagination/laravel-pagination';
import { Resource, resourceColumns } from './components/{resource}-columns';

export default function ResourceIndex({ resources }) {
    return (
        <AppLayout>
            <DataTable
                columns={resourceColumns}
                data={resources.data}
                searchable={true}
            />
            <LaravelPagination meta={{ ...resources }} />
        </AppLayout>
    );
}
```

### 3. Update Controller

```php
public function index(): Response
{
    return Inertia::render('{resource}/index', [
        'resources' => Resource::query()->paginate(15),
    ]);
}
```

### 4. Generate Routes

```bash
php artisan wayfinder:generate
```

## Available shadcn/ui Components

All located in `resources/js/components/ui/`:

**Most Used**:
- `button` - Buttons with variants
- `input` - Text inputs
- `table` - Table primitives
- `badge` - Tags/badges
- `dropdown-menu` - Dropdown menus
- `dialog` - Modals
- `alert` - Alerts

**Full List**: See `DATA_TABLE_SYSTEM.md` for complete inventory of 55+ components

## Key Principles

1. ✅ **Use shadcn/ui components only** - Don't create custom alternatives
2. ✅ **Kebab-case file names** - All new files use lowercase kebab-case
3. ✅ **Reusable column modules** - One columns file per resource
4. ✅ **Laravel pagination** - Works directly with `->paginate()` output
5. ✅ **Type safety** - Full TypeScript support with generics

## File Structure

```
resources/js/
├── components/
│   ├── data-table/
│   │   └── data-table.tsx           # Generic table
│   ├── pagination/
│   │   └── laravel-pagination.tsx   # Laravel pagination
│   └── ui/                          # 55+ shadcn/ui components
├── pages/
│   ├── users/
│   │   ├── index.tsx
│   │   └── components/
│   │       └── users-columns.tsx
│   └── organisations/
│       ├── index.tsx
│       └── components/
│           └── organisations-columns.tsx
└── routes/                          # Generated by Wayfinder
```

## Documentation

For complete documentation, see `DATA_TABLE_SYSTEM.md`:
- Detailed component API
- All available props
- Complete examples
- Best practices
- Column definition patterns
